<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Internet Speed Test - Code Style</title>
<style>
  body {
    background: #1e1e1e;
    color: #d4d4d4;
    font-family: 'Courier New', monospace;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 50px;
  }
  .terminal {
    background: #2d2d2d;
    padding: 20px;
    border-radius: 8px;
    width: 90%;
    max-width: 600px;
    box-shadow: 0 0 20px #000;
  }
  .terminal h1 {
    color: #569cd6;
    font-size: 24px;
    margin-bottom: 10px;
  }
  .code-line {
    margin: 5px 0;
  }
  button {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    border: none;
    border-radius: 5px;
    background: #007acc;
    color: white;
  }
  #console {
    background: #1e1e1e;
    color: #dcdcaa;
    padding: 10px;
    border-radius: 5px;
    min-height: 60px;
    margin-top: 15px;
    font-family: 'Courier New', monospace;
  }
</style>
</head>
<body>
<div class="terminal">
  <h1>Internet Speed Test</h1>
  <div class="code-line">const testSpeed = () =&gt; {</div>
  <div class="code-line">&nbsp;&nbsp;/* Download test file & measure time */</div>
  <div class="code-line">}</div>
  <button onclick="runTest()">Run Test</button>
  <div id="console">Console output...</div>
</div>

<script>
function runTest() {
    const consoleEl = document.getElementById("console");
    consoleEl.innerText = "Downloading test file...";

    const imageAddr = "https://upload.wikimedia.org/wikipedia/commons/3/3f/Fronalpstock_big.jpg";
    const startTime = new Date().getTime();
    const download = new Image();

    download.onload = function () {
        const endTime = new Date().getTime();
        const duration = (endTime - startTime) / 1000;
        const imageSizeBytes = 5500000; // approximate size in bytes
        const bitsLoaded = imageSizeBytes * 8;
        const speedBps = bitsLoaded / duration;
        const speedMbps = speedBps / (1024 * 1024);
        consoleEl.innerText = `Internet Speed: ${speedMbps.toFixed(2)} Mbps`;
    };

    download.onerror = function () {
        consoleEl.innerText = "Error: Could not download test file!";
    };

    download.src = imageAddr + "?cacheBuster=" + new Date().getTime();
}
</script>
</body>
</html>
